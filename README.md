# CarLife - åŒºå—é“¾æ±½è½¦ç”Ÿæ´»å¹³å°

ä¸€ä¸ªåŸºäºåŒºå—é“¾çš„æ±½è½¦ç”Ÿæ´»æœåŠ¡å¹³å°ï¼Œè¿æ¥è½¦ä¸»ã€æœåŠ¡å•†å’ŒåŒºå—é“¾ç”Ÿæ€ã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

### ğŸš— è½¦è¾† NFT ç³»ç»Ÿ
- âœ… **è½¦è¾†ä¿¡æ¯ä¸Šé“¾** - ä¸å¯ç¯¡æ”¹çš„æ‰€æœ‰æƒè¯æ˜
- âœ… **VIN éªŒè¯** - é˜²æ­¢é‡å¤æ³¨å†Œ
- âœ… **é‡Œç¨‹è®°å½•** - é€æ˜å¯ä¿¡çš„é‡Œç¨‹ç®¡ç†
- âœ… **ç»´ä¿®è®°å½•** - å®Œæ•´çš„ç»´ä¿®å†å²
- âœ… **NFT è½¬ç§»** - æ”¯æŒè½¦è¾†æ‰€æœ‰æƒå˜æ›´

### ğŸ“‹ æœåŠ¡æ³¨å†Œç³»ç»Ÿ
- âœ… **æœåŠ¡å•†æ³¨å†Œ** - å»ä¸­å¿ƒåŒ–çš„æœåŠ¡å•†è®¤è¯
- âœ… **æœåŠ¡å‘å¸ƒ** - é€æ˜çš„æœåŠ¡ä¿¡æ¯å’ŒæŠ¥ä»·
- âœ… **è¯„ä»·ç³»ç»Ÿ** - ä¸å¯åˆ é™¤çš„é“¾ä¸Šè¯„ä»·
- âœ… **è¯„åˆ†æœºåˆ¶** - è‡ªåŠ¨è®¡ç®—å¹³å‡è¯„åˆ†

### ğŸ’° æ•°æ® Token åŒ–
- âœ… **æ•°æ®è®°å½•é“¸é€ ** - é‡Œç¨‹ã€ç»´ä¿®ã€é©¾éª‹ç­‰æ•°æ®ä¸Šé“¾
- âœ… **åŠ å¯†å­˜å‚¨** - ä¿æŠ¤ç”¨æˆ·éšç§
- âœ… **æ•°æ®äº¤æ˜“** - æ•°æ®æ‰€æœ‰è€…å¯ä»¥å®‰å…¨äº¤æ˜“
- âœ… **å“ˆå¸ŒéªŒè¯** - é˜²æ­¢é‡å¤è®°å½•

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åŒºå—é“¾
- **Solidity ^0.8.23** - æ™ºèƒ½åˆçº¦
- **OpenZeppelin 5.x** - ERC721ã€Ownableã€Pausable
- **Hardhat 2.22.5** - å¼€å‘æ¡†æ¶
- **Ethers.js** - åŒºå—é“¾äº¤äº’

### åç«¯
- **Go 1.21+** - é«˜æ€§èƒ½åç«¯æœåŠ¡
- **Gin** - Web æ¡†æ¶
- **GORM** - ORM
- **PostgreSQL** - æ•°æ®åº“

### å‰ç«¯ï¼ˆå¼€å‘ä¸­ï¼‰
- **Vue 3** - æ¸è¿›å¼æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Element Plus** - UI ç»„ä»¶åº“
- **Vite** - æ„å»ºå·¥å…·

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
CarLife/
â”œâ”€â”€ contracts/           # æ™ºèƒ½åˆçº¦
â”‚   â””â”€â”€ CarNFT_Fixed.sol   # ä¿®å¤ç‰ˆ CarNFTï¼ˆä¸»åˆçº¦ï¼‰
â”‚
â”œâ”€â”€ test/                 # æµ‹è¯•
â”‚   â””â”€â”€ CarNFT_Fixed.test.js  # å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼ˆ31 æµ‹è¯•ï¼‰
â”‚
â”œâ”€â”€ scripts/              # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ deploy.js            # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ deploy-all.js        # æ‰¹é‡éƒ¨ç½²
â”‚   â”œâ”€â”€ verify.js            # åˆçº¦éªŒè¯
â”‚   â””â”€â”€ check-balance.js     # ä½™é¢æ£€æŸ¥
â”‚
â”œâ”€â”€ backup/               # å¤‡ä»½åˆçº¦ï¼ˆå†å²ç‰ˆæœ¬ï¼‰
â”‚   â”œâ”€â”€ CarLife.sol
â”‚   â”œâ”€â”€ CarNFT.sol
â”‚   â”œâ”€â”€ CarNFT_Optimized.sol
â”‚   â”œâ”€â”€ CarNFT_Optimized_v2.sol
â”‚   â”œâ”€â”€ DataToken.sol
â”‚   â””â”€â”€ ServiceRegistry.sol
â”‚
â”œâ”€â”€ backend/              # åç«¯ï¼ˆPython ç¤ºä¾‹ï¼‰
â”‚   â””â”€â”€ api.py              # FastAPI ç¤ºä¾‹
â”‚
â”œâ”€â”€ frontend/             # å‰ç«¯ï¼ˆç®€å•æ¼”ç¤ºï¼‰
â”‚   â””â”€â”€ index.html          # å…¥å£
â”‚
â”œâ”€â”€ reports/              # æŠ¥å‘Š
â”‚   â””â”€â”€ slither-report.md  # Slither å®‰å…¨æ‰«ææŠ¥å‘Š
â”‚
â”œâ”€â”€ .github/              # GitHub Actions
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ security-scan.yml  # è‡ªåŠ¨å®‰å…¨æ‰«æ
â”‚
â”œâ”€â”€ .solhint.json         # Solidity ä»£ç è§„èŒƒé…ç½®
â”œâ”€â”€ .eslintrc.json        # JavaScript ä»£ç è§„èŒƒé…ç½®
â”œâ”€â”€ hardhat.config.js     # Hardhat é…ç½®
â””â”€â”€ package.json          # é¡¹ç›®ä¾èµ–
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£… Node.js ä¾èµ–
npm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

### 2. ç¼–è¯‘æ™ºèƒ½åˆçº¦

```bash
# ç¼–è¯‘åˆçº¦
npx hardhat compile

# æ¸…ç†ç¼–è¯‘äº§ç‰©
npx hardhat clean
```

### 3. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npx hardhat test

# è¿è¡Œç‰¹å®šæµ‹è¯•
npx hardhat test test/CarNFT_Fixed.test.js

# æµ‹è¯•è¦†ç›–ç‡
npx hardhat coverage
```

### 4. ä»£ç è´¨é‡æ£€æŸ¥

```bash
# Solhint ä»£ç è§„èŒƒæ£€æŸ¥
npx solhint 'contracts/**/*.sol'

# ESLint JavaScript æ£€æŸ¥
npx eslint '**/*.js'

# å®‰å…¨æ‰«æ
npx slither contracts/CarNFT_Fixed.sol
```

### 5. éƒ¨ç½²åˆ°æµ‹è¯•ç½‘ç»œ

```bash
# å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹
npx hardhat node

# éƒ¨ç½²åˆçº¦
npx hardhat run scripts/deploy.js --network localhost

# éªŒè¯åˆçº¦
npx hardhat run scripts/verify.js --network sepolia
```

### 6. åç«¯ APIï¼ˆPython ç¤ºä¾‹ï¼‰

```bash
cd backend

# å®‰è£…ä¾èµ–
pip install fastapi uvicorn

# å¯åŠ¨æœåŠ¡å™¨
python api.py

# è®¿é—® API æ–‡æ¡£
# http://localhost:8000/docs
```

## ğŸ§ª æµ‹è¯•

### æµ‹è¯•è¦†ç›–ç‡

- **æ€»æµ‹è¯•æ•°**: 31 ä¸ª
- **é€šè¿‡ç‡**: 100%
- **è¦†ç›–èŒƒå›´**:
  - âœ… éƒ¨ç½²æµ‹è¯•
  - âœ… Pausable åŠŸèƒ½
  - âœ… Minting åŠŸèƒ½
  - âœ… è½¬è´¦åŠŸèƒ½
  - âœ… è‡ªå®šä¹‰æˆæƒç®¡ç†
  - âœ… è½¦è¾†ä¿¡æ¯æ›´æ–°
  - âœ… ç»´æŠ¤è®°å½•æ·»åŠ 
  - âœ… æŸ¥è¯¢åŠŸèƒ½
  - âœ… URI åŠŸèƒ½

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npx hardhat test

# æ˜¾ç¤ºè¯¦ç»†è¾“å‡º
npx hardhat test --verbose

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npx hardhat test test/CarNFT_Fixed.test.js
```

### æµ‹è¯•ç»“æœç¤ºä¾‹

```
CarNFTFixed
  éƒ¨ç½²
    âœ” åº”è¯¥è®¾ç½®æ­£ç¡®çš„ä»£å¸åç§°å’Œç¬¦å·
    âœ” éƒ¨ç½²è€…åº”è¯¥æ˜¯æ‰€æœ‰è€…
    âœ” åˆå§‹åº”è¯¥æš‚åœé“¸é€ 
    âœ” åˆå§‹ totalCars åº”è¯¥ä¸º 0

  Pausable åŠŸèƒ½
    âœ” æ‰€æœ‰è€…å¯ä»¥æš‚åœå’Œå–æ¶ˆæš‚åœåˆçº¦
    âœ” éæ‰€æœ‰è€…ä¸èƒ½æš‚åœåˆçº¦
    âœ” æ‰€æœ‰è€…å¯ä»¥æš‚åœå’Œå–æ¶ˆæš‚åœé“¸é€ 

  Minting åŠŸèƒ½
    âœ” æ‰€æœ‰è€…å¯ä»¥ mint NFT
    âœ” éæ‰€æœ‰è€…ä¸èƒ½ mint NFT
    âœ” Minting æš‚åœæ—¶ä¸èƒ½ mint
    âœ” åº”è¯¥è®¾ç½®æ­£ç¡®çš„è½¦è¾†ä¿¡æ¯
    âœ” åº”è¯¥è®¾ç½®æ­£ç¡®çš„ tokenURI
    âœ” åº”è¯¥æ­£ç¡®è§¦å‘ CarMinted äº‹ä»¶

  ... (å…± 31 ä¸ªæµ‹è¯•)

  31 passing (1s)
```

## ğŸ“‹ æ™ºèƒ½åˆçº¦åŠŸèƒ½

### CarLife ä¸»åˆçº¦
- âœ… **CarNFT åŠŸèƒ½** - è½¦è¾† NFT é“¸é€ ã€é‡Œç¨‹æ›´æ–°
- âœ… **ServiceRegistry åŠŸèƒ½** - æœåŠ¡å•†æ³¨å†Œã€æœåŠ¡å‘å¸ƒã€è¯„ä»·
- âœ… **DataToken åŠŸèƒ½** - æ•°æ®è®°å½•é“¸é€ ã€æ•°æ®äº¤æ˜“
- âœ… **ç»Ÿä¸€ç®¡ç†** - ä¸€ä¸ªåˆçº¦ç®¡ç†æ‰€æœ‰åŠŸèƒ½

### æ ¸å¿ƒæ–¹æ³•

#### è½¦è¾†ç®¡ç†
```solidity
mintCar(to, vin, brand, model, year, color, mileage, uri)
updateMileage(tokenId, mileage)
getCarInfo(tokenId)
getUserCars(owner)
```

#### æœåŠ¡ç®¡ç†
```solidity
registerProvider(name, serviceType, location)
addService(providerId, title, description, price, currency)
addReview(serviceId, rating, comment)
deactivateProvider(providerId)
```

#### æ•°æ®ç®¡ç†
```solidity
mintDataRecord(carTokenId, dataType, encryptedData, dataHash, price)
listForSale(recordId, price)
purchaseData(recordId)
```

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å‰ç«¯ (Vue 3)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚   åç«¯ API  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   æ™ºèƒ½åˆçº¦   â”‚
         â”‚ (CarLife)     â”‚
         â”‚  (Ethereum)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” å®‰å…¨ç‰¹æ€§

### æ™ºèƒ½åˆçº¦å®‰å…¨
- âœ… **OpenZeppelin 5.x** - ç»è¿‡å®¡è®¡çš„ä»£ç åº“
- âœ… **è®¿é—®æ§åˆ¶** - Ownable + è‡ªå®šä¹‰æˆæƒç³»ç»Ÿ
- âœ… **è¾“å…¥éªŒè¯** - VIN é•¿åº¦ã€å¹´ä»½èŒƒå›´ã€ç§é’¥é•¿åº¦éªŒè¯
- âœ… **é‡å…¥ä¿æŠ¤** - OpenZeppelin `nonReentrant` ä¿®é¥°ç¬¦
- âœ… **å“ˆå¸ŒéªŒè¯** - é˜²æ­¢é‡å¤æ•°æ®
- âœ… **æš‚åœæœºåˆ¶** - Pausable æ”¯æŒï¼Œç´§æ€¥æš‚åœåˆçº¦
- âœ… **è‡ªå®šä¹‰é”™è¯¯** - Gas ä¼˜åŒ–çš„é”™è¯¯å¤„ç†
- âœ… **å‘½åè§„èŒƒ** - Solhint é›¶è­¦å‘Š
- âœ… **å®‰å…¨æ‰«æ** - Slither é™æ€åˆ†æé€šè¿‡
- âœ… **CI/CD é›†æˆ** - GitHub Actions è‡ªåŠ¨å®‰å…¨æ‰«æ

### æ•°æ®å®‰å…¨
- âœ… åŠ å¯†å­˜å‚¨ - ç”¨æˆ·æ•°æ®åŠ å¯†ä¸Šé“¾
- âœ… æ‰€æœ‰æƒéªŒè¯ - ERC721 æ ‡å‡†
- âœ… é›¶çŸ¥è¯†è¯æ˜ - éšç§ä¿æŠ¤

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: è½¦ä¸»
1. é“¸é€ è½¦è¾† NFT
2. æ›´æ–°é‡Œç¨‹è®°å½•
3. è®°å½•ç»´ä¿®ä¿¡æ¯
4. äº¤æ˜“è½¦è¾†æ‰€æœ‰æƒ
5. å‡ºå”®æ•°æ®æƒç›Š

### åœºæ™¯ 2: æœåŠ¡å•†
1. æ³¨å†ŒæœåŠ¡å•†è´¦å·
2. å‘å¸ƒæœåŠ¡ä¿¡æ¯
3. æ¥æ”¶ç”¨æˆ·è¯„ä»·
4. å»ºç«‹ä¿¡èª‰è¯„åˆ†

### åœºæ™¯ 3: æ•°æ®ä¹°å®¶
1. æµè§‚æ•°æ®å¸‚åœº
2. è´­ä¹°æ•°æ®æƒç›Š
3. éªŒè¯æ•°æ®å®Œæ•´æ€§
4. ä½¿ç”¨æ•°æ®è¿›è¡Œå»ºæ¨¡

## ğŸ“š æ–‡æ¡£

### æ™ºèƒ½åˆçº¦
- [CONTRACTS.md](docs/CONTRACTS.md) - æ™ºèƒ½åˆçº¦è¯¦ç»†è¯´æ˜

### API æ–‡æ¡£
- [API.md](docs/API.md) - åç«¯ API æ¥å£æ–‡æ¡£

## ğŸ”‘ é…ç½®

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# åŒºå—é“¾
ETHEREUM_RPC_URL=http://localhost:8545
PRIVATE_KEY=ä½ çš„ç§é’¥

# åç«¯
DATABASE_URL=postgresql://localhost/carlife
REDIS_URL=redis://localhost:6379

# API
API_KEY=your_api_key
```

## ğŸ“ å¼€å‘è®¡åˆ’

### Phase 1: MVP âœ…
- [x] é¡¹ç›®ç»“æ„æ­å»º
- [x] æ™ºèƒ½åˆçº¦å¼€å‘
- [x] åç«¯ API ç¤ºä¾‹
- [x] å‰ç«¯æ¡†æ¶
- [ ] é›†æˆæµ‹è¯•

### Phase 2: æ ¸å¿ƒåŠŸèƒ½
- [ ] è½¦è¾† NFT ç³»ç»Ÿ
- [ ] æœåŠ¡æ³¨å†Œç³»ç»Ÿ
- [ ] æ•°æ® Token åŒ–
- [ ] ç”¨æˆ·è®¤è¯

### Phase 3: é«˜çº§åŠŸèƒ½
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] é«˜çº§æ•°æ®åˆ†æ
- [ ] ç¤¾åŒºåŠŸèƒ½

## ğŸ“„ License

MIT

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ

- **Solidity**: éµå¾ª Solhint è§„èŒƒï¼ˆé›¶è­¦å‘Šï¼‰
- **JavaScript**: éµå¾ª ESLint è§„èŒƒ
- **æäº¤ä¿¡æ¯**: éµå¾ª Conventional Commits è§„èŒƒ
  - `feat:` æ–°åŠŸèƒ½
  - `fix:` ä¿®å¤ bug
  - `docs:` æ–‡æ¡£æ›´æ–°
  - `refactor:` ä»£ç é‡æ„
  - `test:` æµ‹è¯•ç›¸å…³
  - `chore:` æ„å»º/å·¥å…·ç›¸å…³

## ğŸ“ è”ç³»æ–¹å¼

- **å¼€å‘è€…**: ä¸Šç­‰å…µâ€¢ç”˜
- **GitHub**: https://github.com/Pheglovog
- **é¡¹ç›®**: https://github.com/Pheglovog/carlife-eth

---

**æœ€åæ›´æ–°**: 2026-02-10 08:00
**ç‰ˆæœ¬**: v2.0.0
**Solidity**: ^0.8.23
**æµ‹è¯•è¦†ç›–**: 31/31 (100%)
**Solhint**: 0 è­¦å‘Š
